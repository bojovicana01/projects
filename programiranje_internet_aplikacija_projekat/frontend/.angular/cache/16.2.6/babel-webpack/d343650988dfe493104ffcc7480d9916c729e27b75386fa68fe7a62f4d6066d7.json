{"ast":null,"code":"import { Korisnik } from '../models/korisnik';\nimport { Ucenik } from '../models/ucenik';\nimport { Nastavnik } from '../models/nastavnik';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/universal.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nexport class PromenaLozinkePoznataStaraComponent {\n  constructor(universalService, router) {\n    this.universalService = universalService;\n    this.router = router;\n    this.korIme = \"\";\n    this.staraLozinka = \"\";\n    this.novaLozinka1 = \"\";\n    this.novaLozinka2 = \"\";\n    this.korisnik = new Korisnik();\n    this.ucenik = new Ucenik();\n    this.nastavnik = new Nastavnik();\n    this.errMsg = \"\";\n  }\n  promeniLozinku() {\n    if (this.korIme == \"\" || this.staraLozinka == \"\" || this.novaLozinka1 == \"\" || this.novaLozinka2 == \"\") {\n      this.errMsg = \"Niste uneli sva polja. \";\n      return;\n    }\n    if (this.novaLozinka1 != this.novaLozinka2) {\n      this.errMsg = \"Nova lozinka i ponovljena nova lozinka se ne poklapaju. \";\n      return;\n    }\n    let regex = /^(?=.*[A-Z])(?=.*[a-z].*[a-z].*[a-z])(?=.*\\d)(?=.*[^a-zA-Z\\d]).{6,10}$/;\n    if (!regex.test(this.novaLozinka1)) {\n      this.errMsg = \"Neispravan format lozinke. \";\n      return;\n    }\n    // provera da li je stara lozinka ispravno uneta i njena promena ako jeste\n    this.dohvatiKorisnika();\n    console.log(this.korisnik);\n    console.log(this.korIme);\n    if (this.korisnik.flagTip == 0) {\n      this.dohvatiUcenika();\n      console.log(this.ucenik);\n      if (this.ucenik.lozinka != this.staraLozinka) {\n        this.errMsg = \"Pogresno uneta stara lozinka. \";\n        return;\n      }\n    } else if (this.korisnik.flagTip == 1) {\n      this.dohvatiNastavnika();\n      if (this.nastavnik.lozinka != this.staraLozinka) {\n        this.errMsg = \"Pogresno uneta stara lozinka. \";\n        return;\n      }\n    }\n    this.universalService.promeniLozinku(this.korIme, this.novaLozinka1, this.korisnik.flagTip).subscribe(data => {\n      if (data != null) {\n        alert(\"Lozinka promenjena. \");\n        this.router.navigate(['']);\n      } else {\n        console.log(\"Greska. \");\n      }\n    });\n  }\n  promeniLozinkuKorisnikM() {\n    this.universalService.promeniLozinkuKorisnikM(this.korIme, this.novaLozinka1).subscribe(data => {\n      if (data == null) {\n        console.log(\"Greska. \");\n      }\n    });\n  }\n  dohvatiKorisnika() {\n    this.universalService.dohvatiKorisnika(this.korIme).subscribe(data => {\n      if (data != null) {\n        this.korisnik = data;\n      } else {\n        console.log(\"Greska. \");\n      }\n    });\n  }\n  dohvatiUcenika() {\n    this.universalService.dohvatiUcenika(this.korIme).subscribe(data => {\n      if (data != null) {\n        this.ucenik = data;\n      }\n    });\n  }\n  dohvatiNastavnika() {\n    this.universalService.dohvatiNastavnika(this.korIme).subscribe(data => {\n      if (data != null) {\n        this.nastavnik = data;\n      }\n    });\n  }\n  nazad(event) {\n    event.preventDefault();\n    this.router.navigate(['promenaLozinke']);\n  }\n  static #_ = this.ɵfac = function PromenaLozinkePoznataStaraComponent_Factory(t) {\n    return new (t || PromenaLozinkePoznataStaraComponent)(i0.ɵɵdirectiveInject(i1.UniversalService), i0.ɵɵdirectiveInject(i2.Router));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: PromenaLozinkePoznataStaraComponent,\n    selectors: [[\"app-promena-lozinke-poznata-stara\"]],\n    decls: 34,\n    vars: 5,\n    consts: [[\"lang\", \"en\"], [\"charset\", \"UTF-8\"], [\"name\", \"viewport\", \"content\", \"width=device-width, initial-scale=1.0\"], [\"href\", \"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css\", \"rel\", \"stylesheet\"], [2, \"width\", \"100vw\"], [1, \"container\", 2, \"display\", \"flex\", \"justify-content\", \"center\"], [1, \"row\", 2, \"padding\", \"40px\", \"color\", \"aliceblue\"], [2, \"color\", \"aqua\", \"padding\", \"0%\", \"height\", \"10%\", \"font-size\", \"x-large\"], [\"type\", \"text\", \"name\", \"korIme\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"password\", \"name\", \"staraLozinka\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"password\", \"name\", \"novaLozinka1\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"password\", \"name\", \"novaLozinka2\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"button\", 1, \"btn\", \"customDarkBtn\", 2, \"margin-top\", \"30px\", 3, \"click\"], [\"href\", \"\", 2, \"margin-top\", \"30px\", 3, \"change\"]],\n    template: function PromenaLozinkePoznataStaraComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"html\", 0)(1, \"head\");\n        i0.ɵɵelement(2, \"meta\", 1)(3, \"meta\", 2);\n        i0.ɵɵelementStart(4, \"title\");\n        i0.ɵɵtext(5, \"MNN - Promena lozinke\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(6, \"link\", 3);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(7, \"body\", 4)(8, \"div\", 5)(9, \"div\", 6)(10, \"div\")(11, \"b\")(12, \"p\", 7);\n        i0.ɵɵtext(13, \"Promena lozinke\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵtext(14, \" Korisnicko ime: \");\n        i0.ɵɵelementStart(15, \"input\", 8);\n        i0.ɵɵlistener(\"ngModelChange\", function PromenaLozinkePoznataStaraComponent_Template_input_ngModelChange_15_listener($event) {\n          return ctx.korIme = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(16, \"br\");\n        i0.ɵɵtext(17, \" Stara lozinka: \");\n        i0.ɵɵelementStart(18, \"input\", 9);\n        i0.ɵɵlistener(\"ngModelChange\", function PromenaLozinkePoznataStaraComponent_Template_input_ngModelChange_18_listener($event) {\n          return ctx.staraLozinka = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(19, \"br\");\n        i0.ɵɵtext(20, \" Nova lozinka: \");\n        i0.ɵɵelementStart(21, \"input\", 10);\n        i0.ɵɵlistener(\"ngModelChange\", function PromenaLozinkePoznataStaraComponent_Template_input_ngModelChange_21_listener($event) {\n          return ctx.novaLozinka1 = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(22, \"br\");\n        i0.ɵɵtext(23, \" Ponovljena nova lozinka: \");\n        i0.ɵɵelementStart(24, \"input\", 11);\n        i0.ɵɵlistener(\"ngModelChange\", function PromenaLozinkePoznataStaraComponent_Template_input_ngModelChange_24_listener($event) {\n          return ctx.novaLozinka2 = $event;\n        });\n        i0.ɵɵelementEnd();\n        i0.ɵɵelement(25, \"br\");\n        i0.ɵɵtext(26);\n        i0.ɵɵelement(27, \"br\");\n        i0.ɵɵelementStart(28, \"button\", 12);\n        i0.ɵɵlistener(\"click\", function PromenaLozinkePoznataStaraComponent_Template_button_click_28_listener() {\n          return ctx.promeniLozinku();\n        });\n        i0.ɵɵtext(29, \"Potvrdi\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelement(30, \"br\")(31, \"br\");\n        i0.ɵɵelementStart(32, \"a\", 13);\n        i0.ɵɵlistener(\"change\", function PromenaLozinkePoznataStaraComponent_Template_a_change_32_listener($event) {\n          return ctx.nazad($event);\n        });\n        i0.ɵɵtext(33, \"Nazad\");\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(15);\n        i0.ɵɵproperty(\"ngModel\", ctx.korIme);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.staraLozinka);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.novaLozinka1);\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngModel\", ctx.novaLozinka2);\n        i0.ɵɵadvance(2);\n        i0.ɵɵtextInterpolate1(\" \", ctx.errMsg, \" \");\n      }\n    },\n    dependencies: [i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgModel],\n    styles: [\"header[_ngcontent-%COMP%] {\\n    background-image: url('headerImg2.jpg');\\n    background-size: cover; \\n    background-position: center; \\n  }\\n  \\n  body[_ngcontent-%COMP%], html[_ngcontent-%COMP%] {\\n      display: flex;\\n      height: 100vh;\\n      max-height: 5000px;\\n      max-width: 5000px;\\n      margin-left: 0%;\\n      margin-right: 0%;\\n      padding-left: 0%;\\n      padding-right: 0%;\\n  \\n      background-size: cover;\\n  }\\n  \\n  .container[_ngcontent-%COMP%] {\\n      height: 100%;\\n      width: 100%;\\n      max-height: 5000px;\\n      max-width: 5000px;\\n      background-color: #063146;\\n      background-size: cover;\\n  \\n      margin: auto;\\n  \\n      font-family: 'Courier New', Courier, monospace;\\n  }\\n    \\n  .bg[_ngcontent-%COMP%] {\\n      \\n\\n    \\n      \\n\\n      height: 100%;\\n    \\n      \\n\\n      background-position: center;\\n      background-repeat: no-repeat;\\n      background-size: cover;\\n  }\\n  \\n  \\n\\n  \\n  .customDarkBtn[_ngcontent-%COMP%] {\\n    color:rgb(200, 200, 236);\\n    background-color:#0a5275; \\n\\n    border-color:cornflowerblue; \\n\\n  }\\n  \\n  .customDarkBtn[_ngcontent-%COMP%]:hover {\\n    color: rgb(200, 200, 236);\\n    background-color: #031c35; \\n\\n    border-color: #031c35; \\n\\n  }\\n  \\n  \\n\\n\\ninput[type=\\\"text\\\"][_ngcontent-%COMP%] {\\n    width: 100%;\\n    padding: 8px;\\n    margin: 5px 0;\\n    box-sizing: border-box;\\n    border: 1px solid #ccc;\\n    border-radius: 4px;\\n    outline: none; \\n  }\\n\\n  input[type=\\\"text\\\"][_ngcontent-%COMP%]:focus {\\n    border-color: #007bff; \\n    box-shadow: 0 0 5px rgba(0, 123, 255, 0.5); \\n  }\\n\\n  input[type=\\\"password\\\"][_ngcontent-%COMP%] {\\n    width: 100%;\\n    padding: 8px;\\n    margin: 5px 0;\\n    box-sizing: border-box;\\n    border: 1px solid #ccc;\\n    border-radius: 4px;\\n    outline: none; \\n  }\\n\\n  input[type=\\\"password\\\"][_ngcontent-%COMP%]:focus {\\n    border-color: #007bff; \\n    box-shadow: 0 0 5px rgba(0, 123, 255, 0.5); \\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcHJvbWVuYS1sb3ppbmtlLXBvem5hdGEtc3RhcmEvcHJvbWVuYS1sb3ppbmtlLXBvem5hdGEtc3RhcmEuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLHVDQUFvRDtJQUNwRCxzQkFBc0I7SUFDdEIsMkJBQTJCO0VBQzdCOztFQUVBO01BQ0ksYUFBYTtNQUNiLGFBQWE7TUFDYixrQkFBa0I7TUFDbEIsaUJBQWlCO01BQ2pCLGVBQWU7TUFDZixnQkFBZ0I7TUFDaEIsZ0JBQWdCO01BQ2hCLGlCQUFpQjs7TUFFakIsc0JBQXNCO0VBQzFCOztFQUVBO01BQ0ksWUFBWTtNQUNaLFdBQVc7TUFDWCxrQkFBa0I7TUFDbEIsaUJBQWlCO01BQ2pCLHlCQUF5QjtNQUN6QixzQkFBc0I7O01BRXRCLFlBQVk7O01BRVosOENBQThDO0VBQ2xEOztFQUVBO01BQ0ksbUJBQW1COztNQUVuQixnQkFBZ0I7TUFDaEIsWUFBWTs7TUFFWixzQ0FBc0M7TUFDdEMsMkJBQTJCO01BQzNCLDRCQUE0QjtNQUM1QixzQkFBc0I7RUFDMUI7O0VBRUEsK0hBQStIOztFQUUvSDtJQUNFLHdCQUF3QjtJQUN4Qix3QkFBd0IsRUFBRSw4QkFBOEI7SUFDeEQsMkJBQTJCLEVBQUUsZ0NBQWdDO0VBQy9EOztFQUVBO0lBQ0UseUJBQXlCO0lBQ3pCLHlCQUF5QixFQUFFLDBCQUEwQjtJQUNyRCxxQkFBcUIsRUFBRSwwQkFBMEI7RUFDbkQ7O0VBRUEsb0lBQW9JOztBQUV0STtJQUNJLFdBQVc7SUFDWCxZQUFZO0lBQ1osYUFBYTtJQUNiLHNCQUFzQjtJQUN0QixzQkFBc0I7SUFDdEIsa0JBQWtCO0lBQ2xCLGFBQWE7RUFDZjs7RUFFQTtJQUNFLHFCQUFxQjtJQUNyQiwwQ0FBMEM7RUFDNUM7O0VBRUE7SUFDRSxXQUFXO0lBQ1gsWUFBWTtJQUNaLGFBQWE7SUFDYixzQkFBc0I7SUFDdEIsc0JBQXNCO0lBQ3RCLGtCQUFrQjtJQUNsQixhQUFhO0VBQ2Y7O0VBRUE7SUFDRSxxQkFBcUI7SUFDckIsMENBQTBDO0VBQzVDIiwic291cmNlc0NvbnRlbnQiOlsiaGVhZGVyIHtcclxuICAgIGJhY2tncm91bmQtaW1hZ2U6IHVybChcIi4uLy4uL2Fzc2V0cy9oZWFkZXJJbWcyLmpwZ1wiKTtcclxuICAgIGJhY2tncm91bmQtc2l6ZTogY292ZXI7IFxyXG4gICAgYmFja2dyb3VuZC1wb3NpdGlvbjogY2VudGVyOyBcclxuICB9XHJcbiAgXHJcbiAgYm9keSwgaHRtbCB7XHJcbiAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgIGhlaWdodDogMTAwdmg7XHJcbiAgICAgIG1heC1oZWlnaHQ6IDUwMDBweDtcclxuICAgICAgbWF4LXdpZHRoOiA1MDAwcHg7XHJcbiAgICAgIG1hcmdpbi1sZWZ0OiAwJTtcclxuICAgICAgbWFyZ2luLXJpZ2h0OiAwJTtcclxuICAgICAgcGFkZGluZy1sZWZ0OiAwJTtcclxuICAgICAgcGFkZGluZy1yaWdodDogMCU7XHJcbiAgXHJcbiAgICAgIGJhY2tncm91bmQtc2l6ZTogY292ZXI7XHJcbiAgfVxyXG4gIFxyXG4gIC5jb250YWluZXIge1xyXG4gICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICBtYXgtaGVpZ2h0OiA1MDAwcHg7XHJcbiAgICAgIG1heC13aWR0aDogNTAwMHB4O1xyXG4gICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDYzMTQ2O1xyXG4gICAgICBiYWNrZ3JvdW5kLXNpemU6IGNvdmVyO1xyXG4gIFxyXG4gICAgICBtYXJnaW46IGF1dG87XHJcbiAgXHJcbiAgICAgIGZvbnQtZmFtaWx5OiAnQ291cmllciBOZXcnLCBDb3VyaWVyLCBtb25vc3BhY2U7XHJcbiAgfVxyXG4gICAgXHJcbiAgLmJnIHtcclxuICAgICAgLyogVGhlIGltYWdlIHVzZWQgKi9cclxuICAgIFxyXG4gICAgICAvKiBGdWxsIGhlaWdodCAqL1xyXG4gICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICBcclxuICAgICAgLyogQ2VudGVyIGFuZCBzY2FsZSB0aGUgaW1hZ2UgbmljZWx5ICovXHJcbiAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjtcclxuICAgICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcclxuICAgICAgYmFja2dyb3VuZC1zaXplOiBjb3ZlcjtcclxuICB9XHJcbiAgXHJcbiAgLyotLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVNUSUxJWk9WQU5KRSBEVUdNQURJKi9cclxuICBcclxuICAuY3VzdG9tRGFya0J0biB7XHJcbiAgICBjb2xvcjpyZ2IoMjAwLCAyMDAsIDIzNik7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiMwYTUyNzU7IC8qIERhcmsgY29sb3IgZm9yIHRoZSBidXR0b24gKi9cclxuICAgIGJvcmRlci1jb2xvcjpjb3JuZmxvd2VyYmx1ZTsgLyogQm9yZGVyIGNvbG9yIGZvciB0aGUgYnV0dG9uICovXHJcbiAgfVxyXG4gIFxyXG4gIC5jdXN0b21EYXJrQnRuOmhvdmVyIHtcclxuICAgIGNvbG9yOiByZ2IoMjAwLCAyMDAsIDIzNik7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDMxYzM1OyAvKiBEYXJrZXIgY29sb3Igb24gaG92ZXIgKi9cclxuICAgIGJvcmRlci1jb2xvcjogIzAzMWMzNTsgLyogQm9yZGVyIGNvbG9yIG9uIGhvdmVyICovXHJcbiAgfVxyXG4gIFxyXG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1LUkFKIFNUSUxJWk9WQU5KQSBEVUdNQURJKi9cclxuXHJcbmlucHV0W3R5cGU9XCJ0ZXh0XCJdIHtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgcGFkZGluZzogOHB4O1xyXG4gICAgbWFyZ2luOiA1cHggMDtcclxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xyXG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xyXG4gICAgb3V0bGluZTogbm9uZTsgXHJcbiAgfVxyXG5cclxuICBpbnB1dFt0eXBlPVwidGV4dFwiXTpmb2N1cyB7XHJcbiAgICBib3JkZXItY29sb3I6ICMwMDdiZmY7IFxyXG4gICAgYm94LXNoYWRvdzogMCAwIDVweCByZ2JhKDAsIDEyMywgMjU1LCAwLjUpOyBcclxuICB9XHJcblxyXG4gIGlucHV0W3R5cGU9XCJwYXNzd29yZFwiXSB7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIHBhZGRpbmc6IDhweDtcclxuICAgIG1hcmdpbjogNXB4IDA7XHJcbiAgICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcclxuICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgIG91dGxpbmU6IG5vbmU7IFxyXG4gIH1cclxuXHJcbiAgaW5wdXRbdHlwZT1cInBhc3N3b3JkXCJdOmZvY3VzIHtcclxuICAgIGJvcmRlci1jb2xvcjogIzAwN2JmZjsgXHJcbiAgICBib3gtc2hhZG93OiAwIDAgNXB4IHJnYmEoMCwgMTIzLCAyNTUsIDAuNSk7IFxyXG4gIH0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n  });\n}","map":{"version":3,"names":["Korisnik","Ucenik","Nastavnik","PromenaLozinkePoznataStaraComponent","constructor","universalService","router","korIme","staraLozinka","novaLozinka1","novaLozinka2","korisnik","ucenik","nastavnik","errMsg","promeniLozinku","regex","test","dohvatiKorisnika","console","log","flagTip","dohvatiUcenika","lozinka","dohvatiNastavnika","subscribe","data","alert","navigate","promeniLozinkuKorisnikM","nazad","event","preventDefault","_","i0","ɵɵdirectiveInject","i1","UniversalService","i2","Router","_2","selectors","decls","vars","consts","template","PromenaLozinkePoznataStaraComponent_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵlistener","PromenaLozinkePoznataStaraComponent_Template_input_ngModelChange_15_listener","$event","PromenaLozinkePoznataStaraComponent_Template_input_ngModelChange_18_listener","PromenaLozinkePoznataStaraComponent_Template_input_ngModelChange_21_listener","PromenaLozinkePoznataStaraComponent_Template_input_ngModelChange_24_listener","PromenaLozinkePoznataStaraComponent_Template_button_click_28_listener","PromenaLozinkePoznataStaraComponent_Template_a_change_32_listener","ɵɵadvance","ɵɵproperty","ɵɵtextInterpolate1"],"sources":["C:\\Users\\Ana\\Desktop\\7.SEMESTAR\\pia\\projekat\\frontend\\src\\app\\promena-lozinke-poznata-stara\\promena-lozinke-poznata-stara.component.ts","C:\\Users\\Ana\\Desktop\\7.SEMESTAR\\pia\\projekat\\frontend\\src\\app\\promena-lozinke-poznata-stara\\promena-lozinke-poznata-stara.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { UniversalService } from '../services/universal.service';\nimport { Router } from '@angular/router';\nimport { Korisnik } from '../models/korisnik';\nimport { Ucenik } from '../models/ucenik';\nimport { Nastavnik } from '../models/nastavnik';\n\n@Component({\n  selector: 'app-promena-lozinke-poznata-stara',\n  templateUrl: './promena-lozinke-poznata-stara.component.html',\n  styleUrls: ['./promena-lozinke-poznata-stara.component.css']\n})\nexport class PromenaLozinkePoznataStaraComponent {\n\n  constructor(private universalService : UniversalService, private router : Router) {}\n\n  korIme : string = \"\"\n  staraLozinka : string = \"\"\n  novaLozinka1 : string = \"\"\n  novaLozinka2 : string = \"\"\n\n  korisnik : Korisnik = new Korisnik()\n  ucenik : Ucenik = new Ucenik()\n  nastavnik : Nastavnik = new Nastavnik()\n\n  errMsg : string = \"\"\n\n  promeniLozinku() {\n\n    if (this.korIme == \"\" || this.staraLozinka == \"\" || this.novaLozinka1 == \"\" || this.novaLozinka2 == \"\") {\n      this.errMsg = \"Niste uneli sva polja. \"\n      return\n    }\n\n    if (this.novaLozinka1 != this.novaLozinka2) {\n      this.errMsg = \"Nova lozinka i ponovljena nova lozinka se ne poklapaju. \"\n      return\n    }\n\n    let regex = /^(?=.*[A-Z])(?=.*[a-z].*[a-z].*[a-z])(?=.*\\d)(?=.*[^a-zA-Z\\d]).{6,10}$/\n    if (!regex.test(this.novaLozinka1)) {\n      this.errMsg = \"Neispravan format lozinke. \"\n      return\n    }\n\n    // provera da li je stara lozinka ispravno uneta i njena promena ako jeste\n    this.dohvatiKorisnika()\n    console.log(this.korisnik)\n    console.log(this.korIme)\n\n    if (this.korisnik.flagTip == 0) {\n      this.dohvatiUcenika()\n      console.log(this.ucenik)\n      if (this.ucenik.lozinka != this.staraLozinka) {\n        this.errMsg = \"Pogresno uneta stara lozinka. \"\n        return\n      }\n    }\n    else if (this.korisnik.flagTip == 1) {\n      this.dohvatiNastavnika()\n      if (this.nastavnik.lozinka != this.staraLozinka) {\n        this.errMsg = \"Pogresno uneta stara lozinka. \"\n        return\n      }\n    }\n\n    \n    \n    this.universalService.promeniLozinku(this.korIme, this.novaLozinka1, this.korisnik.flagTip).subscribe(\n      data => {\n        if (data != null) {\n          alert(\"Lozinka promenjena. \")\n          this.router.navigate([''])\n        }\n        else {\n          console.log(\"Greska. \")\n        }\n      }\n    )\n\n  }\n\n  promeniLozinkuKorisnikM() {\n    this.universalService.promeniLozinkuKorisnikM(this.korIme, this.novaLozinka1).subscribe(\n      data => {\n        if (data == null) {\n          console.log(\"Greska. \")\n        }\n      }\n    )\n  }\n\n  dohvatiKorisnika() {\n    this.universalService.dohvatiKorisnika(this.korIme).subscribe(\n      data => {\n        if (data != null) {\n          this.korisnik = data\n        }\n        else {\n          console.log(\"Greska. \")\n        }\n      }\n    )\n  }\n\n  dohvatiUcenika() {\n    this.universalService.dohvatiUcenika(this.korIme).subscribe(\n      data => {\n        if (data != null) {\n          this.ucenik = data\n        }\n      }\n    )\n  }\n\n  dohvatiNastavnika() {\n    this.universalService.dohvatiNastavnika(this.korIme).subscribe(\n      data => {\n        if (data != null) {\n          this.nastavnik = data\n        }\n      }\n    )\n  }\n\n  nazad(event : Event) {\n    event.preventDefault()\n    this.router.navigate(['promenaLozinke'])\n  }\n\n}\n","<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>MNN - Promena lozinke</title>\n\n    <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css\" rel=\"stylesheet\">\n    <script src=\"https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js\"></script>\n\n</head>\n\n<body style=\"width: 100vw;\">\n    <div class=\"container\" style=\"display: flex; justify-content: center;\">\n\n        <div class=\"row\" style=\"padding: 40px; color: aliceblue;\">\n            <div>\n                <b><p style=\"color: aqua; padding: 0%; height: 10%; font-size: x-large;\" >Promena lozinke</p></b>\n                Korisnicko ime: <input type=\"text\" name=\"korIme\" [(ngModel)]=\"korIme\"> <br>\n                Stara lozinka: <input type=\"password\" name=\"staraLozinka\" [(ngModel)]=\"staraLozinka\"> <br>\n                Nova lozinka: <input type=\"password\" name=\"novaLozinka1\" [(ngModel)]=\"novaLozinka1\"> <br>\n                Ponovljena nova lozinka: <input type=\"password\" name=\"novaLozinka2\" [(ngModel)]=\"novaLozinka2\"> <br>\n                {{errMsg}} <br>\n\n                <button style=\"margin-top: 30px;\"  type=\"button\" class=\"btn customDarkBtn\" (click)=\"promeniLozinku()\">Potvrdi</button>\n            </div>\n        </div>\n        <br><br>\n        <a href=\"\" (change)=\"nazad($event)\" style=\"margin-top: 30px;\">Nazad</a>\n    \n    </div>\n</body>\n        \n</html>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}